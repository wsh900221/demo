<!DOCTYPE html>
<html>
	<head>
		<!-- Standard Meta -->
		<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

		<!-- Vendor Specific -->
		<!-- Set renderer engine for 360 browser -->
		<meta name="renderer" content="webkit">

		<!-- Cache Meta -->
		<meta http-equiv="Expires" content="0">
		<meta http-equiv="Cache-Control" content="no-cache">
		<meta http-equiv="Pragma" content="no-cache">

		<!-- Style Sheet -->
		<link rel="stylesheet" href="../static/lib/jquery/jquery-ui.css" />
		<link rel="stylesheet" href="../static/lib/qtip/jquery.qtip.css" />
		<link rel="stylesheet" href="../static/css/common/basic.css" />
		<link rel="stylesheet" href="../static/css/libext/jquery.ext.css" />
		<link rel="stylesheet" href="../static/css/app.css" />
		<!--[if lt IE 9]>
		<script type="text/javascript" src="../static/js/html5/html5shiv.js"></script>
		<![endif]-->

		<!-- script here -->
		<script type="text/javascript" src="../static/lib/jquery/jquery.js"></script>
		<script type="text/javascript" src="../static/lib/jquery/jquery-migrate.min.js"></script>
		<script type="text/javascript" src="../static/lib/jquery/jquery-ui.js"></script>
		<script type="text/javascript" src="../static/lib/jquery/jquery.locale-cn.js"></script>
		<script type="text/javascript" src="../static/lib/qtip/jquery.qtip.js"></script>
		<script type="text/javascript" src="../static/lib/layer/layer.min.js"></script>
		<script type="text/javascript" src="../static/lib/layer/extend/layer.ext.js"></script>
		<script type="text/javascript" src="../static/js/common/laytpl.js"></script>
		<script type="text/javascript" src="../static/js/common/common.js"></script>
		<script type="text/javascript" src="../static/js/libext/layer.ext.js"></script>
		<script type="text/javascript" src="../static/js/libext/jquery.ext.js"></script>
		<script type="text/javascript" src="../static/lib/lazyload/jquery.lazyload.js"></script>
		<script type="text/javascript" src="../static/js/app.js"></script>

		<title>图片对话框</title>

		<style type="text/css">
		</style>
	</head>

	<body>
		<br/>
		<input type="checkbox" id="selectMode" />
		<label for="selectMode">单选模式</label> &nbsp;&nbsp;
		<button style="border:1px solid gray;height:28px;border-radius: 4px;" onclick="openRepoImageDlg()">
			打开图片对话框
		</button>

		<script type="text/javascript">
			var sampleImages = [{
				fileBrowseUrl : "../static/tmp-images/ohoopee1.jpg"
			}, {
				fileBrowseUrl : "../static/tmp-images/ohoopee2.jpg"
			}, {
				fileBrowseUrl : "../static/tmp-images/ohoopee3.jpg"
			}, {
				fileBrowseUrl : "http://www.appelsiini.net/projects/lazyload/img/bmw_m1_hood.jpg"
			}, {
				fileBrowseUrl : "http://www.appelsiini.net/projects/lazyload/img/bmw_m1_side.jpg"
			}, {
				fileBrowseUrl : "http://www.appelsiini.net/projects/lazyload/img/viper_1.jpg"
			}, {
				fileBrowseUrl : "http://www.appelsiini.net/projects/lazyload/img/viper_corner.jpg"
			}, {
				fileBrowseUrl : "http://www.appelsiini.net/projects/lazyload/img/bmw_m3_gt.jpg"
			}, {
				fileBrowseUrl : "http://www.appelsiini.net/projects/lazyload/img/corvette_pitstop.jpg"
			}, {
				fileBrowseUrl : "http://img14.360buyimg.com/n5/jfs/t841/334/1387925649/141038/485698fa/559b2e0dNf5d393cc.jpg"
			}, {
				fileBrowseUrl : "http://img14.360buyimg.com/n2/jfs/t901/267/1303308/132242/ad1b77f9/54d97c26N96a3f73d.jpg"
			}];

			//模拟返回的图片信息列表
			function getSampleImages() {
				return sampleImages;
			}

			//处理选中的图片列表
			function handleSelectedImages(imageDlg) {
				var imageItems = imageDlg.getSelected() || [];
				if (isArray(imageItems)) {
					//多选结果
					for (var i = 0; i < imageItems.length; i++) {
						var imageItem = imageItems[i];
						console.log(imageItem);
					}
				} else {
					//单选结果
					var imageItem = imageItems;
					console.log(imageItem);
				}
			}

			//示例 - 对话框配置参数
			var sampleDlgConfig = {
				title : "选择图片",
				//singleSelect : true,
				//width : 980,
				//height : 600,
				//imageWidth : 210,
				//imageHeight : 130,
				//图片获取
				//fetchUrl : "/demo/goods/image/intro/get",
				fetchUrl : getSampleImages,
				fetchParams : {
					goodsId : 123
				},
				//图片上传
				//uploadUrl : "/file/upload",
				uploadParams : {
					usage : "image.goods",
					subUsage : "intro",
					goodsId : 123
				},
				//uploadCallback : handleUploadedFiles,
				//删除回调
				//deleteHanlder : toDeleteGoodsIntroImage,
				//确定回调
				okClickHandler : handleSelectedImages
			};

			//图片选择对话框
			var repoImageDlg = RepoImageDlg.newOne();

			//显示图片选择对话框
			function openRepoImageDlg() {
				var dlgConfig = sampleDlgConfig;
				//
				dlgConfig.singleSelect = $id("selectMode").is(":checked");
				//
				repoImageDlg.show(dlgConfig);
			}

			//
			$(function() {
			});
		</script>
	</body>
</html>
